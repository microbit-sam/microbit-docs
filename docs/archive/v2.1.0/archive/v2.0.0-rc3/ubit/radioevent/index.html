<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>radioevent - micro:bit runtime</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../css/extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-76156484-1', 'auto');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-custom navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            
                <a class="navbar-brand" rel="home" href="#" title="micro:bit runtime">
                    
                    <!-- Logo author: Aluna Everitt (@AlunaEveritt on Twitter) --->
                    
                    <img style="max-width:200px; margin-top: -7px;" src="../.././img/logo[whiteruntime].png">
                </a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            

            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">General <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../..">Introduction</a>
</li>

                    
                        
<li >
    <a href="../../concepts/">Concepts</a>
</li>

                    
                        
<li >
    <a href="../../advanced/">Advanced</a>
</li>

                    
                        
<li >
    <a href="../../online-toolchains/">Online Development</a>
</li>

                    
                        
<li >
    <a href="../../offline-toolchains/">Offline Development</a>
</li>

                    
                        
<li >
    <a href="../../device/">Hardware</a>
</li>

                    
                        
<li >
    <a href="../../help/">Help</a>
</li>

                    
                    </ul>
                </li>
            
            

            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">uBit <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../">Overview</a>
</li>

                    
                        
<li >
    <a href="../i2c/">i2c</a>
</li>

                    
                        
<li >
    <a href="../storage/">storage</a>
</li>

                    
                        
<li >
    <a href="../serial/">serial</a>
</li>

                    
                        
<li >
    <a href="../messageBus/">messageBus</a>
</li>

                    
                        
<li >
    <a href="../button/">buttons</a>
</li>

                    
                        
<li >
    <a href="../display/">display</a>
</li>

                    
                        
<li >
    <a href="../accelerometer/">accelerometer</a>
</li>

                    
                        
<li >
    <a href="../compass/">compass</a>
</li>

                    
                        
<li >
    <a href="../thermometer/">thermometer</a>
</li>

                    
                        
<li >
    <a href="../io/">io</a>
</li>

                    
                        
<li >
    <a href="../radio/">radio</a>
</li>

                    
                    </ul>
                </li>
            
            

            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Data Types <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../data-types/image/">MicroBitImage</a>
</li>

                    
                        
<li >
    <a href="../../data-types/event/">MicroBitEvent</a>
</li>

                    
                        
<li >
    <a href="../../data-types/string/">ManagedString</a>
</li>

                    
                        
<li >
    <a href="../../data-types/packetbuffer/">PacketBuffer</a>
</li>

                    
                    </ul>
                </li>
            
            

            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Bluetooth <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../ble/profile/">Profile</a>
</li>

                    
                        
<li >
    <a href="../../ble/accelerometer-service/">AccelerometerService</a>
</li>

                    
                        
<li >
    <a href="../../ble/button-service/">ButtonService</a>
</li>

                    
                        
<li >
    <a href="../../ble/dfu-service/">DFUService</a>
</li>

                    
                        
<li >
    <a href="../../ble/event-service/">EventService</a>
</li>

                    
                        
<li >
    <a href="../../ble/iopin-service/">IOPinService</a>
</li>

                    
                        
<li >
    <a href="../../ble/led-service/">LEDService</a>
</li>

                    
                        
<li >
    <a href="../../ble/magnetometer-service/">MagnetometerService</a>
</li>

                    
                        
<li >
    <a href="../../ble/temperature-service/">TemperatureService</a>
</li>

                    
                        
<li >
    <a href="../../ble/uart-service/">UARTService</a>
</li>

                    
                    </ul>
                </li>
            
            

            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Extras <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../extras/light-sensing/">MicroBitLightSensor</a>
</li>

                    
                        
<li >
    <a href="../../extras/spi/">SPI</a>
</li>

                    
                    </ul>
                </li>
            
            

            

            
            

            

            
            

            

            
            

            

            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right hidden-md hidden-sm">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../multibutton/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../radiodatagram/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/lancaster-university/microbit-dal/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#ubitradioevent">uBit.radio.event</a></li>
        
            <li><a href="#overview">Overview</a></li>
        
            <li><a href="#message-bus-id">Message Bus ID</a></li>
        
            <li><a href="#message-bus-events">Message Bus Events</a></li>
        
    
        <li class="main "><a href="#api">API</a></li>
        
            <li><a href="#constructor">Constructor</a></li>
        
            <li><a href="#listen">listen</a></li>
        
            <li><a href="#ignore">ignore</a></li>
        
            <li><a href="#packetreceived">packetReceived</a></li>
        
            <li><a href="#eventreceived">eventReceived</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="ubitradioevent">uBit.radio.event<a class="headerlink" href="#ubitradioevent" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>It is also possible to transparently send and receive events over the <code>MicroBitRadio</code> channel. This can provide very simple and easy to integrate
support for event driven applications. Once configured, an event raised on one micro:bit can be detected on another - in the just the same way as
a local event such as a button click.</p>
<p>To use this functionality, all that is needed is to register the event codes that you would like to be sent over the radio, then write event handlers
for the message bus as with all other events. See the documentation for the <a href="../messageBus/"><code>MicroBitMessageBus</code></a> for details of how to write
event handlers.</p>
<p>For example, if you wanted to share an event SOMETHING with another micro:bit whenever ButtonA is pressed, you might write code like this on the sending micro:bit:</p>
<pre><code class="cpp">#define MY_APP_ID           4000
#define SOMETHING           1

int main()
{
    uBit.radio.enable();

    // Ensure the radio is listening out to forward our events
    uBit.radio.event.listen(MY_APP_ID, MICROBIT_EVT_ANY);

    while(1)
    {
        if (uBit.buttonA.isPressed())
            MicroBitEvent(MY_APP_ID, SOMETHING);

        uBit.sleep(1000);
    }
}
</code></pre>

<p>...and on the micro:bits wanting to receive the event:</p>
<pre><code class="cpp">#define MY_APP_ID           4000
#define SOMETHING           1

void onSomething(MicroBitEvent e)
{
    uBit.display.scrollAsync(&quot;Something!&quot;);
}

int main()
{
    uBit.messageBus.listen(MY_APP_ID, SOMETHING, onSomething);
    uBit.radio.enable();

    while(1)
        uBit.sleep(1000);
}
</code></pre>

<h2 id="message-bus-id">Message Bus ID<a class="headerlink" href="#message-bus-id" title="Permanent link">&para;</a></h2>
<blockquote>
<p>None.</p>
</blockquote>
<h2 id="message-bus-events">Message Bus Events<a class="headerlink" href="#message-bus-events" title="Permanent link">&para;</a></h2>
<blockquote>
<p>None.</p>
</blockquote>
<h1 id="api">API<a class="headerlink" href="#api" title="Permanent link">&para;</a></h1>
<h2 id="constructor">Constructor<a class="headerlink" href="#constructor" title="Permanent link">&para;</a></h2>
<p><br/></p>
<h4 id="microbitradioevent-microbitradio-r">MicroBitRadioEvent( <div style='color:#a71d5d; display:inline-block'>MicroBitRadio  &amp;</div> r)<a class="headerlink" href="#microbitradioevent-microbitradio-r" title="Permanent link">&para;</a></h4>
<h5 id="description">Description<a class="headerlink" href="#description" title="Permanent link">&para;</a></h5>
<p>Constructor.  </p>
<p>Creates an instance of  MicroBitRadioEvent  which offers the ability to extend the micro:bit's default  EventModel  to other micro:bits in the vicinity.  </p>
<p>r </p>
<p>The underlying radio module used to send and receive data.   </p>
<h5 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h5>
<blockquote>
<p><div style='color:#a71d5d; display:inline-block'>MicroBitRadio  &amp;</div> r - The underlying radio module used to send and receive data. </p>
</blockquote>
<h2 id="listen">listen<a class="headerlink" href="#listen" title="Permanent link">&para;</a></h2>
<p><br/></p>
<h4 id="int-listen-uint16_t-id-uint16_t-value"><div style='color:#a71d5d; display:inline-block'>int</div> <div style='color:#795da3; display:inline-block'>listen</div>( <div style='color:#a71d5d; display:inline-block'>uint16_t</div> id,  <div style='color:#a71d5d; display:inline-block'>uint16_t</div> value)<a class="headerlink" href="#int-listen-uint16_t-id-uint16_t-value" title="Permanent link">&para;</a></h4>
<h5 id="description_1">Description<a class="headerlink" href="#description_1" title="Permanent link">&para;</a></h5>
<p>Associates the given event with the radio channel.  </p>
<p>Once registered, all events matching the given registration sent to this micro:bit's default  EventModel  will be automatically retransmitted on the radio.  </p>
<h5 id="parameters_1">Parameters<a class="headerlink" href="#parameters_1" title="Permanent link">&para;</a></h5>
<blockquote>
<p><div style='color:#a71d5d; display:inline-block'>uint16_t</div> id - The id of the event to register.</p>
<p><div style='color:#a71d5d; display:inline-block'>uint16_t</div> value - the value of the event to register.</p>
</blockquote>
<h5 id="returns">Returns<a class="headerlink" href="#returns" title="Permanent link">&para;</a></h5>
<p>MICROBIT_OK on success, or MICROBIT_NO_RESOURCES if no default  EventModel  is available.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The wildcards MICROBIT_ID_ANY and MICROBIT_EVT_ANY can also be in place of the id and value fields. </p>
</div>
<p><br/></p>
<h4 id="int-listen-uint16_t-id-uint16_t-value-eventmodel-eventbus"><div style='color:#a71d5d; display:inline-block'>int</div> <div style='color:#795da3; display:inline-block'>listen</div>( <div style='color:#a71d5d; display:inline-block'>uint16_t</div> id,  <div style='color:#a71d5d; display:inline-block'>uint16_t</div> value,  <div style='color:#a71d5d; display:inline-block'>EventModel  &amp;</div> eventBus)<a class="headerlink" href="#int-listen-uint16_t-id-uint16_t-value-eventmodel-eventbus" title="Permanent link">&para;</a></h4>
<h5 id="description_2">Description<a class="headerlink" href="#description_2" title="Permanent link">&para;</a></h5>
<p>Associates the given event with the radio channel.  </p>
<p>Once registered, all events matching the given registration sent to the given  EventModel  will be automatically retransmitted on the radio.  </p>
<h5 id="parameters_2">Parameters<a class="headerlink" href="#parameters_2" title="Permanent link">&para;</a></h5>
<blockquote>
<p><div style='color:#a71d5d; display:inline-block'>uint16_t</div> id - The id of the events to register.</p>
<p><div style='color:#a71d5d; display:inline-block'>uint16_t</div> value - the value of the event to register.</p>
<p><div style='color:#a71d5d; display:inline-block'>EventModel  &amp;</div> eventBus - The  EventModel  to listen for events on.</p>
</blockquote>
<h5 id="returns_1">Returns<a class="headerlink" href="#returns_1" title="Permanent link">&para;</a></h5>
<p>MICROBIT_OK on success.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The wildcards MICROBIT_ID_ANY and MICROBIT_EVT_ANY can also be in place of the id and value fields. </p>
</div>
<h2 id="ignore">ignore<a class="headerlink" href="#ignore" title="Permanent link">&para;</a></h2>
<p><br/></p>
<h4 id="int-ignore-uint16_t-id-uint16_t-value"><div style='color:#a71d5d; display:inline-block'>int</div> <div style='color:#795da3; display:inline-block'>ignore</div>( <div style='color:#a71d5d; display:inline-block'>uint16_t</div> id,  <div style='color:#a71d5d; display:inline-block'>uint16_t</div> value)<a class="headerlink" href="#int-ignore-uint16_t-id-uint16_t-value" title="Permanent link">&para;</a></h4>
<h5 id="description_3">Description<a class="headerlink" href="#description_3" title="Permanent link">&para;</a></h5>
<p>Disassociates the given event with the radio channel.  </p>
<h5 id="parameters_3">Parameters<a class="headerlink" href="#parameters_3" title="Permanent link">&para;</a></h5>
<blockquote>
<p><div style='color:#a71d5d; display:inline-block'>uint16_t</div> id - The id of the events to deregister.</p>
<p><div style='color:#a71d5d; display:inline-block'>uint16_t</div> value - The value of the event to deregister.</p>
</blockquote>
<h5 id="returns_2">Returns<a class="headerlink" href="#returns_2" title="Permanent link">&para;</a></h5>
<p>MICROBIT_OK on success, or MICROBIT_INVALID_PARAMETER if the default message bus does not exist.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MICROBIT_EVT_ANY can be used to deregister all event values matching the given id. </p>
</div>
<p><br/></p>
<h4 id="int-ignore-uint16_t-id-uint16_t-value-eventmodel-eventbus"><div style='color:#a71d5d; display:inline-block'>int</div> <div style='color:#795da3; display:inline-block'>ignore</div>( <div style='color:#a71d5d; display:inline-block'>uint16_t</div> id,  <div style='color:#a71d5d; display:inline-block'>uint16_t</div> value,  <div style='color:#a71d5d; display:inline-block'>EventModel  &amp;</div> eventBus)<a class="headerlink" href="#int-ignore-uint16_t-id-uint16_t-value-eventmodel-eventbus" title="Permanent link">&para;</a></h4>
<h5 id="description_4">Description<a class="headerlink" href="#description_4" title="Permanent link">&para;</a></h5>
<p>Disassociates the given events with the radio channel.  </p>
<h5 id="parameters_4">Parameters<a class="headerlink" href="#parameters_4" title="Permanent link">&para;</a></h5>
<blockquote>
<p><div style='color:#a71d5d; display:inline-block'>uint16_t</div> id - The id of the events to deregister.</p>
<p><div style='color:#a71d5d; display:inline-block'>uint16_t</div> value - The value of the event to deregister.</p>
<p><div style='color:#a71d5d; display:inline-block'>EventModel  &amp;</div> eventBus - The  EventModel  to deregister on.</p>
</blockquote>
<h5 id="returns_3">Returns<a class="headerlink" href="#returns_3" title="Permanent link">&para;</a></h5>
<p>MICROBIT_OK on success.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MICROBIT_EVT_ANY can be used to deregister all event values matching the given id. </p>
</div>
<h2 id="packetreceived">packetReceived<a class="headerlink" href="#packetreceived" title="Permanent link">&para;</a></h2>
<p><br/></p>
<h4 id="void-packetreceived"><div style='color:#a71d5d; display:inline-block'>void</div> <div style='color:#795da3; display:inline-block'>packetReceived</div>()<a class="headerlink" href="#void-packetreceived" title="Permanent link">&para;</a></h4>
<h5 id="description_5">Description<a class="headerlink" href="#description_5" title="Permanent link">&para;</a></h5>
<p>Protocol handler callback. This is called when the radio receives a packet marked as using the event protocol.  </p>
<p>This function process this packet, and fires the event contained inside onto the default  EventModel .           </p>
<h2 id="eventreceived">eventReceived<a class="headerlink" href="#eventreceived" title="Permanent link">&para;</a></h2>
<p><br/></p>
<h4 id="void-eventreceived-microbitevent-e"><div style='color:#a71d5d; display:inline-block'>void</div> <div style='color:#795da3; display:inline-block'>eventReceived</div>( <div style='color:#a71d5d; display:inline-block'>MicroBitEvent</div> e)<a class="headerlink" href="#void-eventreceived-microbitevent-e" title="Permanent link">&para;</a></h4>
<h5 id="description_6">Description<a class="headerlink" href="#description_6" title="Permanent link">&para;</a></h5>
<p>Event handler callback. This is called whenever an event is received matching one of those registered through the registerEvent() method described above. Upon receiving such an event, it is wrapped into a radio packet and transmitted to any other micro:bits in the same group.           </p>
<h5 id="parameters_5">Parameters<a class="headerlink" href="#parameters_5" title="Permanent link">&para;</a></h5>
<blockquote>
<p><div style='color:#a71d5d; display:inline-block'>MicroBitEvent</div> e</p>
</blockquote>
<hr /></div>
        </div>

        <footer class="col-md-12">
            
            <center><a href="https://www.lancaster.ac.uk"><image style="width:auto;" height="61" src="../../img/lancs-logo.png"></image></a></center>
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>